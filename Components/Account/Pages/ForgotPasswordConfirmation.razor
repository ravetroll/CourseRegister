@page "/Account/ForgotPasswordConfirmation"
@rendermode InteractiveServer

@inject NavigationManager Navigation
@using Microsoft.AspNetCore.WebUtilities
@using MudBlazor
@using Microsoft.Extensions.Primitives


<PageTitle>Forgot password confirmation</PageTitle>

<MudContainer Class="d-flex align-center justify-center pt-10">
    <MudPaper Class="pa-6" Style="max-width: 500px; width: 100%;">
        <MudText Typo="Typo.h5" Class="mb-4">Forgot password confirmation</MudText>
        <MudText Typo="Typo.body1">
            Please check your email to reset your password.
        </MudText>
       
            <MudButton Variant="Variant.Filled"
                       Color="Color.Primary"
                       Class="mt-4"
                       OnClick="NavigateToCallbackUrl">
                Click here to reset your password
            </MudButton>
        
    </MudPaper>
</MudContainer>

@code {
    private StringValues _callbackUrl;
    

    protected override void OnInitialized()
    {
        var uri = new Uri(Navigation.Uri);
        var query = QueryHelpers.ParseQuery(uri.Query);

        
        query.TryGetValue("callbackUrl", out _callbackUrl);
            
        
    }

    private void NavigateToCallbackUrl()
    {
        // Construct an absolute URI to ensure navigation is correct
        var absoluteUri = Navigation.ToAbsoluteUri(_callbackUrl);
        Navigation.NavigateTo(absoluteUri.AbsoluteUri, forceLoad: true);
    }
}
